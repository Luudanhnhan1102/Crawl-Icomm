function setUrl(n){urlMain=n;type==3&&recommendDataRegex()}function changeAttrType(){$(".valueOption").remove();$(".selectAttributeCss").remove();var n=$("#Type").val();switch(n){case"3":$(".form-control.typedata").prepend("<option class='valueOption' value='id'>ID<\/option>");$(".form-control.typedata").val("id");$("#labelName").html("Nhập Regex lấy ID của bài viết:");$(".allPropperty").attr("disabled","disabled");break;case"0":$(".form-control.typedata").prepend("<option class='valueOption' value='keywords'>Keywords<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='tags'>Tags<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='categories'>Categories<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='comments_count'>Comment count<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='author'>Author<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='content_path'>Content path<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='time_path'>Time path<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='meta_description'>Meta description<\/option>");$(".form-control.typedata").prepend("<option class='valueOption' value='title_path'>Title path<\/option>");$(".form-control.typedata").val("title_path");$("#labelName").html("Nhập bộ chọn Css:");$(".allPropperty").removeAttr("disabled");break;default:$(".form-control.typedata").prepend("<option class='valueOption' value='link'>Link<\/option>");$(".form-control.typedata").val("link");$(".form-control.attribute").append("<option class='selectAttributeCss' value='href'>Href<\/option>");$("#labelName").html("Nhập bộ chọn Css:");$(".allPropperty").removeAttr("disabled")}}function clickShowContent(n){var i=[],t;$(".form-control.typedata option").each(function(){i.push($(this).val())});$("#typedata-difference").remove();t=$(n).attr("id");i.indexOf(t)>-1?($(".form-control.typedata").val(t),t=="difference"&&($(".div-typedata").append("<input class='form-control ml-auto' placeholder='Nhập loại dữ liệu' id='typedata-difference' type='text'>"),$("#typedata-difference").val(t))):($(".form-control.typedata").val("difference"),$(".div-typedata").append("<input class='form-control ml-auto' placeholder='Nhập loại dữ liệu' id='typedata-difference' type='text'>"),$("#typedata-difference").val(t));$("#myCssSelectorTest").val(jsonGenerator[t]._xpath);$(".form-control.exclude").remove();$(".input-group.entityproperty").remove();jsonGenerator[t]._removeTags!=null&&jsonGenerator[t]._removeTags.forEach(function(n){$(".form-group.exclude").append("<div class='input-group'><input value=\""+n+'" type="text" class="form-control form-control-sm exclude" style="margin-top:5px;"><em onclick=\'deleteInput(this);\' class=\'fas fa-trash-alt trash-delete\'><\/em><\/div>')});jsonGenerator[t]._transformations!=null&&Object.keys(jsonGenerator[t]._transformations[0]).forEach(function(n){$(".form-group.property").append("<div id='"+n+"' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='"+n+"' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" value='"+jsonGenerator[t]._transformations[0][n]+'\' class="col-md-8 form-control form-control-sm" ><\/div>')});t=="tags"||t=="categories"&&jsonGenerator[t].attr=="html"?($(".form-group.property").append("<div id='text' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='link' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" value='"+jsonGenerator[t].link._xpath+'\' class="col-md-8 form-control form-control-sm" ><\/div>'),$(".form-group.property").append("<div id='text' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='text' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" value='"+jsonGenerator[t].text._xpath+'\' class="col-md-8 form-control form-control-sm" ><\/div>'),Object.keys(jsonGenerator[t]).forEach(function(n){arr1.indexOf(n)==-1&&$(".form-group.property").append("<div class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value=\""+n+'" class="col-md-4 form-control form-control-sm" ><input placeholder=\'Giá trị\' type="text" value="'+jsonGenerator[t][n]+"\" class=\"col-md-8 form-control form-control-sm\" ><em onclick='deleteInput(this);' class='fas fa-trash-alt trash-delete-all'><\/em><\/div>")})):t=="link"?($(".selectAttributeCss").remove(),$(".form-control.attribute").append("<option class='selectAttributeCss' value='href'>Href<\/option>")):Object.keys(jsonGenerator[t]).forEach(function(n){arr.indexOf(n)==-1&&$(".form-group.property").append("<div class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value=\""+n+'" class="col-md-4 form-control form-control-sm" ><input placeholder=\'Giá trị\' type="text" value="'+jsonGenerator[t][n]+"\" class=\"col-md-8 form-control form-control-sm\" ><em onclick='deleteInput(this);' class='fas fa-trash-alt trash-delete-all'><\/em><\/div>")});$("#createTableJson").html("Cập nhật");$("#createTableJson").attr("onclick","updateTable();");$("#Type").val()==0&&changeAttr(jsonGenerator[t]._xpath);$(".form-control.attribute").val(jsonGenerator[t].attr);getContent(!1)}function updateTable(){var n=$(".form-control.typedata").val();n=="difference"&&(n=$("#typedata-difference").val());n!=null&&n.trim()!=""?(delete jsonGenerator[n],setNewType(n),$(".typedata").change()):alert("Loại dữ liệu không được bỏ trống")}function cancelTable(){$("#ListData #"+$(".typedata").val()).click()}function convertData(n){jsonGenerator=JSON.parse(n);Object.keys(jsonGenerator).forEach(function(n){jsonGenerator[n].attr=jsonGenerator[n]._xpath.split("/@")[1];jsonGenerator[n]._xpath=jsonGenerator[n]._xpath.split("/@")[0];var t="<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='"+n+"'>"+n;t+="<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>";$("#ListData tbody").append(t)});jsonGenerator.time_path!=null&&jsonGenerator.time_path._transformations!=null&&delete jsonGenerator.time_path._transformations[0]._type;jsonGenerator.comments_count!=null&&jsonGenerator.comments_count._transformations!=null&&delete jsonGenerator.comments_count._transformations[0]._type}function parseData(){var n=clone(jsonGenerator);return Object.keys(n).forEach(function(t){n[t].attr!=null&&(n[t]._xpath+="/@"+n[t].attr,delete n[t].attr)}),n.time_path!=null&&n.time_path._transformations!=null&&(n.time_path._transformations[0]._type="DateTimeTransformation"),n.comments_count!=null&&n.comments_count._transformations!=null&&(n.comments_count._transformations[0]._type="TotalCountTransformation"),n}function editJson(){$("#myModal").modal()}function getContent(n){var i,u,t,r;n&&$("#Type").val()==0&&(i=$(".attribute").val(),changeAttr($("#myCssSelectorTest").val()),$(".attribute").val(i));iframe.contents().find("#divShowInfoTag").hide();i=$("#myCssSelectorTest").val();iframe.contents().find(".myClass").removeClass("myClass");try{u=$(i,iframe.contents());u.addClass("myClass");t=$(".form-control.attribute").find(":selected").val();r="";t!=null&&(r=t=="html"||t=="text"?iframe.contents().find(".myClass").html():iframe.contents().find(".myClass").attr(t));$("#myContentValue").val(r)}catch(f){}}function changeAttr(n){var i=$(n,iframe.contents()),t,n;$(".selectAttributeCss").remove();t=$(".form-control.attribute");n="";i.first().each(function(){$.each(this.attributes,function(){if(this.specified&&this.name!="id"&&this.name!="class"){n=this.value;n.length>50&&(n=n.substring(0,49));var i="<option class='selectAttributeCss' value='"+this.name+"'>"+this.name+" : "+n+"<\/option>";t.append(i)}})})}function funcionRemove(n){var t=n.parent().prev().attr("id");delete jsonGenerator[t];n.parent().parent().html("");$(".typedata").change()}function update_url(){history.pushState(null,null,"?url="+encodeURIComponent($("#meataData").val())+"&type="+$("#Type").val()+"&javascript="+$("#Javascript").val())}function funcionClick(){$("#meataData").val($("#meataData").val().trim());var n=$("#meataData").val().trim();(n!=urlMain||$("#Type").val()!=type||$("#Javascript").val()!=javascript)&&((n!=urlMain||$("#Javascript").val()!=javascript)&&(n.startsWith("http")||(n="http://"+n),iframe.attr("src",urlIframe+"?url="+encodeURIComponent(n)+"&javascript="+$("#Javascript").val()),$("#meataData").val(n),javascript=$("#Javascript").val()),jsonGenerator={},domain=n.split("/").length>2?n.split("/")[2].replace("www.",""):"",update_url(),clearData(),getData())}function getData(){var n=$("#Type").val();$(".updateData , .createData, .deletaData").remove();$("table#ListData tbody tr").remove();$.ajax({type:"GET",url:"./api/get",data:{url:domain,type:n},error:function(){alert("Can't get data from database!")},success:function(t){var i,r;if(t!=null)$(".updateData , .createData, .deletaData").remove(),$("table#ListData tbody tr").remove(),n==3?(jsonGenerator={},i=JSON.parse(t.Content),jsonGenerator.id=i,r="<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);' id='id'>id<\/td> <td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr >",$("#ListData tbody").append(r)):convertData(t.Content),$("#meataData").val()==urlMain&&$(".typedata").change(),id=t.Id,type=t.Type,$(".createUpdateData").prepend("<button class='btn btn-danger btn-sm deletaData ml-auto' onclick='deleteData();'>Xóa Domain<\/button>"),$(".createUpdateData").prepend("<button class='btn btn-primary btn-sm updateData' onclick='updateData();'>Cập nhật Domain<\/button>");else{if($(".createUpdateData").prepend("<button class='btn btn-primary btn-sm createData' onclick='createData();'>Lưu Domain<\/button>"),$("#meataData").val()==urlMain)recommendData();else $("#crawlDATA").one("load",function(){recommendData()});type=$("#Type").val()}urlMain=$("#meataData").val()},timeout:5e3})}function testData(){var i=!1,t,r,n;$("#Type").val()==3?(t=JSON.stringify(jsonGenerator.id),i=!0):t=JSON.stringify(parseData());r=$("#meataData").val();n={};n.url=r;n.data=t;n.javascript=$("#Javascript").val();n.isID=i;$.ajax({url:"./Home/JsonResult",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$("#myData").modal();$("#url").val($("#meataData").val());$("#data").val(JSON.stringify(t,undefined,2));$("#result tbody tr").remove();var i=JSON.parse(n);Object.keys(i).forEach(function(n){var t,r,u;n!="content_path"?i[n]instanceof Array?(t="",listTypeGetFirstElement.indexOf(n)>-1?t=i[n]instanceof Object?JSON.stringify(i[n][0]):i[n][0]:(r=[],i[n].forEach(function(n){n instanceof Object?t+=JSON.stringify(n)+"<br>":r.indexOf(n)<0&&(t+=n+"<br>",r.push(n))})),$("#result tbody").append("<tr><td>"+n+"<\/td><td>"+t+"<\/td><\/tr>")):i[n]instanceof Object?$("#result tbody").append("<tr><td>"+n+"<\/td><td>"+JSON.stringify(i[n])+"<\/td><\/tr>"):$("#result tbody").append("<tr><td>"+n+"<\/td><td>"+i[n]+"<\/td><\/tr>"):(u=i[n]instanceof Array?i[n][0]:i[n],$("#result tbody").append("<tr><td>"+n+"<\/td><td><textarea class='form-control ml-auto' rows='10' id='content_path' disabled><\/textarea><button type='button' onclick='viewHtml();' class='btn btn-sm btn-default'>View html<\/button><\/td><\/tr>"),$("#result tbody #content_path").val(u))})}})}function createTable(){var u=$("#myCssSelectorTest").val(),n,r,i,t;if(u!="")if(n=$(".typedata").val(),n=="difference"&&(n=$("#typedata-difference").val()),n!=null&&n.trim()!="")if(r=$("#ListData #"+n),r.length==0){if(i="<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='"+n+"'>"+n,i+="<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>",$("#ListData tbody").append(i),setNewType(n),$("#Type").val()==0)for(t=0;t<listTypeDate.length;t++)if(!(listTypeDate[t]in jsonGenerator)){$(".typedata").val(listTypeDate[t]);break}$(".typedata").change()}else alert("Loại dữ liệu đã tồn tại");else alert("Loại dữ liệu không được bỏ trống");else alert("Xpath không được bỏ trống")}function setNewType(n){var t,i,r,u;if($("#Type").val()==3)i={},i._xpath=$("#myCssSelectorTest").val(),t=$(".form-group.property .input-group.entityproperty"),t.length>0&&t.each(function(){var n=$(this).children();n[0].value!=""&&n[1].value!=""&&arr.indexOf(n[0].value)==-1&&(i[n[0].value]=n[1].value)}),jsonGenerator[n]=i;else{i={};i._xpath=$("#myCssSelectorTest").val();i.attr=$(".form-control.attribute").find(":selected").val();var e=$(".form-control.exclude"),t=$(".form-group.property .input-group.entityproperty"),f=[];e.length>0&&e.each(function(){$(this).val()!=""&&f.push($(this).val())});n=="time_path"?(r={},r[t[0].children[0].value]=t[0].children[1].value,r[t[1].children[0].value]=t[1].children[1].value,r[t[2].children[0].value]=t[2].children[1].value,i._transformations=[r],t[0].remove(),t[1].remove(),t[2].remove()):n=="comments_count"?(r={},r[t[0].children[0].value]=t[0].children[1].value,r[t[1].children[0].value]=t[1].children[1].value,i._transformations=[r],t[0].remove(),t[1].remove()):(n=="tags"||n=="categories"&&$(".attribute").val()=="html")&&(u={},u._xpath=t[0].children[1].value,u._transformations=["TrimTransformation"],i[t[0].children[0].value]=u,u={},u._xpath=t[1].children[1].value,u._transformations=["TrimTransformation"],i[t[1].children[0].value]=u,t[0].remove(),t[1].remove());t=$(".form-group.property .input-group.entityproperty");t.length>0&&t.each(function(){var n=$(this).children();n[0].value!=""&&n[1].value!=""&&arr.indexOf(n[0].value)==-1&&(i[n[0].value]=n[1].value)});f.length>0&&(i._removeTags=f);jsonGenerator[n]=i}}function clearData(){$(".form-control.exclude").remove();$(".input-group.entityproperty").remove();$("#Type").val()==0||$("#Type").val()==3?$(".form-control.attribute").val("text"):$(".form-control.attribute").val("href");$("#myCssSelectorTest").val("");$("#myContentValue").val("");$("#typedata-difference").remove();$("#createTableJson").html("Tạo");$("#createTableJson").attr("onclick","createTable();")}function getPathTo(n){var r,u,t,i;if(n.id!=="")return"//*[@id='"+n.id+"']";if(n===document.body)return n.tagName;for(r=0,u=n.parentNode.childNodes,t=0;t<u.length;t++){if(i=u[t],i===n)return getPathTo(n.parentNode)+"/"+n.tagName.toLowerCase()+"["+(r+1)+"]";i.nodeType===1&&i.tagName===n.tagName&&r++}}function addExclude(){$(".form-group.exclude").append("<div class='input-group'><input type=\"text\" class=\"form-control form-control-sm exclude\" style=\"margin-top:5px;\"><em onclick='deleteInput(this);' class='fas fa-trash-alt trash-delete'><\/em><\/div>")}function addPropertiese(){$(".form-group.property").append("<div class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" class=\"col-md-4 form-control form-control-sm\" ><input placeholder='Giá trị' type=\"text\" class=\"col-md-8 form-control form-control-sm\" ><em onclick='deleteInput(this);' class='fas fa-trash-alt trash-delete-all'><\/em><\/div>")}function clone(n){var t,i,u,r;if(null==n||"object"!=typeof n)return n;if(n instanceof Date)return t=new Date,t.setTime(n.getTime()),t;if(n instanceof Array){for(t=[],i=0,u=n.length;i<u;i++)t[i]=clone(n[i]);return t}if(n instanceof Object){t={};for(r in n)n.hasOwnProperty(r)&&(t[r]=clone(n[r]));return t}throw new Error("Unable to copy obj! Its type isn't supported.");}function deleteInput(n){$(n).parent().remove()}function viewHtml(){var n=window.open();$(n.document.body).html($("#result tbody #content_path").val())}function createData(){var n;n=$("#Type").val()==3?JSON.stringify(jsonGenerator.id):JSON.stringify(parseData());$.ajax({type:"PUT",url:"./api/domain",data:{Domain1:domain,Type:$("#Type").val(),Content:n,Properties:JSON.stringify({}.javascript=$("#Javascript").val())},success:function(n){n=="success"?(alert("Thêm Domain thành công!"),getData()):alert(n)},error:function(){alert("Thêm Domain thất bại!")}})}function recommendData(){var n=$("#Type").val();n==0?recommendDataDetail():n==3&&recommendDataRegex()}function recommendDataDetail(){var i,n,t;jsonGenerator={};clearData();n=iframe.contents().find("meta[name*='title'],meta[property*='title']").first();n.length>0&&(t={},t._xpath=n.attr("name")!=undefined?"meta[name='"+n.attr("name")+"']":"meta[property='"+n.attr("property")+"']",t.attr="content",jsonGenerator.title_path=t,$("#ListData tbody").append("<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='title_path'>title_path<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>"));n=iframe.contents().find("meta[name*='time'],meta[property*='time']").first();n.length>0&&(t={},i={},i.date_regex="\\d+-\\d+-\\d+",i.time_regex="\\d+:\\d+:\\d+",i.datetime_format="yyyy-MM-dd HH:mm:ss",t._transformations=[i],t._xpath=n.attr("name")!=undefined?"meta[name='"+n.attr("name")+"']":"meta[property='"+n.attr("property")+"']",t.attr="content",jsonGenerator.time_path=t,$("#ListData tbody").append("<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='time_path'>time_path<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>"));n=iframe.contents().find("meta[name*='description'],meta[property*='description']").first();n.length>0&&(t={},t._xpath=n.attr("name")!=undefined?"meta[name='"+n.attr("name")+"']":"meta[property='"+n.attr("property")+"']",t.attr="content",jsonGenerator.meta_description=t,$("#ListData tbody").append("<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='meta_description'>meta_description<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>"));n=iframe.contents().find("meta[name*='keywords'],meta[property*='keywords']").first();n.length>0&&(t={},t._xpath=n.attr("name")!=undefined?"meta[name='"+n.attr("name")+"']":"meta[property='"+n.attr("property")+"']",t.attr="content",jsonGenerator.keywords=t,$("#ListData tbody").append("<tr><td class='col-md-11 myHover' onclick='clickShowContent(this);'  id='keywords'>keywords<\/td><td class='col-md-1'><i class='fa fa-trash' aria-hidden='true' data-toggle='tooltip' title='Xóa!' onclick='funcionRemove($(this));'><\/i><\/td><\/tr>"));$(".typedata").change()}function recommendDataRegex(){if(jsonGenerator.id==null){jsonGenerator={};clearData();$(".form-group.property").append("<div id='text' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='group_number' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"number\" value='1' class=\"col-md-8 form-control form-control-sm\" ><\/div>");var t=$("#meataData").val(),n=["(\\d+)\\.?(html|htm|epi|chn|vgp|antd|apl|bcb|\\/)?$","\\/(\\d+)\\/"];for(i=0;i<n.length;i++)if(t.search(n[i])>=0){$("#myCssSelectorTest").val(n[i]);break}$("#myCssSelectorTest").val().trim()!=""&&(createTable(),$(".typedata").change())}}function deleteData(){confirm("Bạn có chắc chắn xóa domain này!")&&$.ajax({type:"DELETE",url:"./api/domain/delete/"+id,success:function(n){n!=null?(alert("Xóa thành công!"),type=n.type,update_url(),getData(),$(".typedata").change()):alert("Xóa thất bại!")},error:function(){alert("Xóa thất bại!")}})}function updateData(){var n;n=$("#Type").val()==3?JSON.stringify(jsonGenerator.id):JSON.stringify(parseData());$.ajax({type:"POST",url:"./api/update",data:{Id:id,Content:n,Properties:JSON.stringify({}.javascript=$("#Javascript").val())},success:function(n){n==!0?(alert("Đã cập nhật Domain!"),update_url(),getData()):alert("Cập nhật thất bại!")},error:function(){alert("Cập nhật thất bại!")}})}var jsonGenerator={},arr=["_xpath","_removeTags","attr","_transformations"],arr1=["_xpath","_removeTags","attr","_transformations","text","link"],listTypeDate=["title_path","meta_description","time_path","content_path","author","comments_count","categories","tags"],listTypeGetFirstElement=["title_path","meta_description","time_path","content_path"],domain="",type=0,javascript="",id=0,urlIframe=location.origin+"/Home/html",iframe;$("#Type").change(function(){changeAttrType();funcionClick()});$("#Javascript").change(function(){funcionClick()});$(".tooltip1").tooltip();iframe=$("#crawlDATA");$("#meataData").keyup(function(n){n.preventDefault();n.keyCode===13&&funcionClick()});$.fn.xpathEvaluate=function(n){for($this=this.first(),xpathResult=this[0].evaluate(n,this[0],null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),result=[];elem=xpathResult.iterateNext();)result.push(elem);return $result=jQuery([]).pushStack(result)};$("#myCssSelectorTest").change(function(){getContent(!0);$(this).val($(this).val().trim())});$(document).ready(function(){$(".form-control.typedata").change(function(){var n=$(this).val();n=="difference"&&(n=$("#typedata-difference").val());$("#ListData #"+n).length>0?$("#ListData #"+n).click():(clearData(),$(this).val()=="difference"?$(".div-typedata").append("<input class='form-control ml-auto' placeholder='Nhập loại dữ liệu' id='typedata-difference' type='text'>"):$(this).val()=="time_path"?($(".form-group.property").prepend("<div id='datetime_format' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='datetime_format' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" class=\"col-md-8 form-control form-control-sm\" value='dd/MM/yyyy HH:mm'><\/div>"),$(".form-group.property").prepend("<div id='time_regex' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='time_regex' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" class=\"col-md-8 form-control form-control-sm\" value='\\d+:\\d+' ><\/div>"),$(".form-group.property").prepend("<div id='date_regex' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='date_regex' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" class=\"col-md-8 form-control form-control-sm\" value='\\d+/\\d+/\\d+' ><\/div>")):$(this).val()=="comments_count"?($(".form-group.property").prepend("<div id='total_comments_regex' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='total_comments_regex' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"text\" class=\"col-md-8 form-control form-control-sm\" value='(\\d+)'><\/div>"),$(".form-group.property").append("<div id='text' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='group_number' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' type=\"number\" value='1' class=\"col-md-8 form-control form-control-sm\" ><\/div>")):($(this).val()=="tags"||$(this).val()=="categories")&&($(".form-group.property").prepend("<div id='link_"+$(this).val()+"' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='link' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' value='a/@href' type=\"text\" class=\"col-md-8 form-control form-control-sm\" ><\/div>"),$(".form-group.property").prepend("<div id='text_"+$(this).val()+"' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='text' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' value='a/@text' type=\"text\" class=\"col-md-8 form-control form-control-sm\" ><\/div>")),$(this).val()=="content_path"||$(this).val()=="tags"||$(this).val()=="categories"?$(".form-control.attribute").val("html"):$(".form-control.attribute").val("text"))});$("select.attribute").change(function(){var n=$(".form-control.typedata").val(),t=$(this).val();n=="time_path"&&$(this).val()=="datetime"?($("#datetime_format").children(0).eq(1).val("yyyy-MM-dd HH:mm:ss"),$("#time_regex").children(0).eq(1).val("\\d+:\\d+:\\d+"),$("#date_regex").children(0).eq(1).val("\\d+-\\d+-\\d+")):(n=="tags"||n=="categories")&&($(".input-group.entityproperty").remove(),t=="html"&&($(".form-group.property").prepend("<div id='link_"+$(this).val()+"' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='link' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' value='a/@href' type=\"text\" class=\"col-md-8 form-control form-control-sm\" ><\/div>"),$(".form-group.property").prepend("<div id='text_"+$(this).val()+"' class='input-group entityproperty'><input placeholder='Thuộc tính' type=\"text\" value='text' class=\"col-md-4 form-control form-control-sm\" disabled><input placeholder='Giá trị' value='a/@text' type=\"text\" class=\"col-md-8 form-control form-control-sm\" ><\/div>")))})});